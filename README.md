# 简记

[简记Github地址](https://github.com/Hugo-Gao/SimpleCount)

简记是我准备比赛的一个项目，于是便决定做一个APP来完成这个项目。简记的立意来源是这样的，当时喜欢和朋友们去附近各个景点玩，一玩就是一两天，费用又都是AA制的，玩完回来后要算账很麻烦，还要相互之间传照片就更麻烦了。针对这个痛点我就萌生了做个APP来解决的想法，也就是简记。

当时我没有任何做APP的经验，甚至学编程也才一年。在询问老师和学长具体的开发步骤和需要的技术栈后，我就开始了边学边做之路。从Android开始学起，然后到数据库SQLite。写需求分析文档也是必不可少的，从老师口中知道了文档的撰写对于软件开发流程的规范也是很重要的。我在对用户场景的具体分析后画出了APP的功能流程图。

![APP流程图](https://i.loli.net/2018/02/25/5a921dfd8f834.png)

本来做完第一版APP的时候是没想做好友之间互传账单这些后台功能的，但是又突然心血来潮想去做个服务器把这个功能完成了。于是又去翻资料，知道了用Python做最简单，挑了个Flask框架很快就把服务器代码写好了。然后又有一个难题就是本机上部署服务器倒是做好了，但是我不能一直开着我的电脑当作服务器啊。于是我又了解到有个东西叫做云服务器，于是我又上网学到了云服务器远程部署，把服务器部署到了阿里云上。

写代码的过程中有一个东西挺搞笑的，就是我当时还不知道什么叫做多线程，我在做上传照片功能测试的时候发现上传地太慢了，10几张照片本地压缩然后上传完成要花一分多种，我觉得不至于啊，然后我才知道还有一个东西叫做多线程......一股脑学完多线程，把代码改成多线程上传后，时间从一分多钟下降到十几秒，还算可以接受了。我在多次测试上传功能又发现问题了，我写的代码是用一个count变量记录要上传的照片总数，当一个线程上传照片完成后，就将count-1，最后所有线程完成后count=0，通知主线程弹出dialog告知用户照片上传完毕。我就发现有些时候照片上传十几分钟都不弹出dialog通知我上传完毕，而照片又确确实实上传完了。最重要的是这个bug还不是每次都会出现，只是偶尔出现，当时简直把我整崩溃了，调了好几天都没改好这个bug。直到后来看完Java虚拟机后我才知道，原来count要加一个volatile关键字，这真的说明基础不牢地动山摇啊。

最后APP完成效果如下：

![用户注册](https://i.loli.net/2018/02/25/5a92234e25a69.png)

![](https://i.loli.net/2018/02/25/5a922723cc3f6.png)

![](https://i.loli.net/2018/02/25/5a922746230f4.png)

![](https://i.loli.net/2018/02/25/5a92275a85f65.png)

![](https://i.loli.net/2018/02/25/5a9227683daf7.png)

可惜的是阿里云服务器到期后，我也就没有继续部署服务器了。
